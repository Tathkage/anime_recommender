<button (click)="onLogout()">Logout</button>
<button (click)="navigateToWatchlist()">Go to Watchlist</button>

<div class="anime-list-container">
	<div class="generate-button">
		<button (click)="getAnimeList()">Generate</button>
		<span class="toggle-label">Use API</span>
		<label class="toggle-switch">
			<input type="checkbox" [(ngModel)]="useAPI">
			<span class="slider round"></span>
		</label>
		<span class="toggle-label">Use Web Scraper</span>
	</div>

	<button (click)="openGenreSelectionDialog()">Select Genres</button>
  
	<div class="pagination-info">
		<p>Page {{ currentPage }} of {{ totalPages }}</p>
	</div>

	<div class="pagination-buttons">
		<button (click)="previousPage()" [disabled]="currentPage === 1">&lt; Previous</button>
		<button (click)="nextPage()" [disabled]="currentPage === totalPages">Next &gt;</button>
	</div>

	<!-- Add a loading spinner -->
	<div class="loading-spinner" *ngIf="isLoading">
		<div class="spinner-container">
			<div class="spinner"></div>
			<p>Generating Watchlist...</p>
		</div>
	</div>	  

	<div>
		<table class="anime-table">
			<thead>
				<tr>
					<th class="title-col">Title and Description</th>
					<th class="rating-col">Rating</th>
					<th class="status-col">Status</th>
					<th class="ep-count-col">Episode Count</th>
					<th class="ep-length-col">Episode Length</th>
					<th class="release-year-col">Release Year</th>
					<th class="watchlist-col"></th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let anime of animeList | slice:(currentPage-1)*itemsPerPage:currentPage*itemsPerPage; let i = index">
					<td>
						<div class="anime-title">{{ anime.Title }}</div>
						<div [ngClass]="{'anime-description': true, 'collapsed': !anime.isExpanded}">
							{{ anime.isExpanded ? anime.Description : (anime.Description | slice:0:150) + '...' }}
						</div>
						<button *ngIf="anime.Description.length > 150" (click)="toggleDescription((currentPage-1)*itemsPerPage+i)">
							{{ anime.isExpanded ? 'Read Less' : 'Read More' }}
						</button>
					</td>
					<td>{{ anime.Rating }}</td>
					<td>{{ anime.Status }}</td>
					<td>{{ anime['Episode Count'] }}</td>
					<td>{{ anime['Episode Length'] }} min</td>
					<td>{{ anime['Release Year'] }}</td>
					<td><button (click)="openAddToWatchlistDialog(anime)">Add to Watchlist</button></td>
				</tr>
			</tbody>
		</table>
	</div>

	<!-- <div class="anime-cards">
		<div class="anime-card" *ngFor="let anime of animeList | slice:(currentPage-1)*itemsPerPage:currentPage*itemsPerPage">
			<div class="anime-header">
				<h3>{{ anime.Title }}</h3>
				<p>Rating: {{ anime.Rating }}</p>
			</div>
			<div class="anime-info">
				<p><strong>Status:</strong> {{ anime.Status }}</p>
				<p><strong>Episode Count:</strong> {{ anime['Episode Count'] }}</p>
				<p><strong>Episode Length:</strong> {{ anime['Episode Length'] }} min</p>
				<p><strong>Release Year:</strong> {{ anime['Release Year'] }}</p>
			</div>
			<div class="anime-description">
				<p>{{ anime.Description }}</p>
			</div>
			Add "Add to Watchlist" button
			<button (click)="openAddToWatchlistDialog(anime)">Add to Watchlist</button>
		</div>
	</div> -->
</div>
